
#### 1、作用
- 应用解耦：生产和消费分离，甚至可以多个消费者
- 异步处理：比回调请求获取数据更快，性能更高
- 流量削峰：限制最大入库数据量，不超过系统所能承受的最大请求量，避免数据库压力过大

#### 2、缺陷
- 系统可用性降低，因为MQ可能宕机
- 复杂度变高，需要考虑消息丢失和消息重读消费问题
- 一致性问题

#### 3、如何保证消息不被重复消费
- 消息带上全局唯一id，缓存redis校验或入库校验
- 消息入库可用数据库唯一键约束

#### 4、如何保证消息不丢失？
- 生产者丢失：确认机制或事务机制
- MQ丢失：做持久化
- 消费者丢失：手动确认，成功再确认

#### 5、如何保证消息的顺序性
生产者保证入队顺序，避免消费者并发消费同一队列消息



